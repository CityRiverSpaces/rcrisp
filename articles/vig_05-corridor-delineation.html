<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5. Corridor delineation • rcrisp</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="5. Corridor delineation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rcrisp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/vig_01-method.html">The method</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Preparation</h6></li>
    <li><a class="dropdown-item" href="../articles/vig_02-getting-osm-data.html">Getting OSM data for delineation</a></li>
    <li><a class="dropdown-item" href="../articles/vig_03-network-preparation.html">Preparing the network for delineation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Delineation</h6></li>
    <li><a class="dropdown-item" href="../articles/vig_04-valley-delineation.html">Valley delineation</a></li>
    <li><a class="dropdown-item" href="../articles/vig_05-corridor-delineation.html">Corridor delineation</a></li>
    <li><a class="dropdown-item" href="../articles/vig_06-corridor-segmentation.html">Corridor segmentation</a></li>
    <li><a class="dropdown-item" href="../articles/vig_07-riverspace-delineation.html">Riverspace delineation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CityRiverSpaces/rcrisp/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>5. Corridor delineation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CityRiverSpaces/rcrisp/blob/main/vignettes/vig_05-corridor-delineation.Rmd" class="external-link"><code>vignettes/vig_05-corridor-delineation.Rmd</code></a></small>
      <div class="d-none name"><code>vig_05-corridor-delineation.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cityriverspaces.github.io/rcrisp/">rcrisp</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">bucharest_osm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_osm_example_data.html">get_osm_example_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">bucharest_dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_dem_example_data.html">get_dem_example_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>In this notebook we explore how to delineate an urban river corridor
using river Dâmbovița in Bucharest, Romania. We will use OpenStreetMap
(OSM) data, first from the Overpass API and then from a local file.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">city_name</span> <span class="op">&lt;-</span> <span class="st">"Bucharest"</span></span>
<span><span class="va">river_name</span> <span class="op">&lt;-</span> <span class="st">"Dâmbovița"</span></span></code></pre></div>
<p>We start by demonstrating the use of the all-in-one
<code><a href="../reference/delineate.html">delineate()</a></code> function which does the following three
steps:</p>
<ol style="list-style-type: decimal">
<li><p>Fetches city boundary, street and rail network, as well as river
centreline and surface data from the <a href="https://wiki.openstreetmap.org/wiki/Overpass_API" class="external-link">Overpass API</a>
as shown in <code>vignette("getting-osm-data")</code>;</p></li>
<li><p>Pre-processes the street and rail network for delineation as
shown in <code>vignette("network-preparation")</code></p></li>
<li><p>Constructs the initial corridor based on the chosen method. With
the default <code>method = "valley"</code>, the Cost Distance
Accumulation algorithm is used to delineate the corridor based on the
digital elevation model (DEM) of the area retrieved from the <a href="https://element84.com/earth-search/" class="external-link">Earth Search API</a>. If the
<code>method = "buffer"</code> is chosen instead, the corridor is
constructed by buffering the river centreline and surface data with a
given buffer distance.</p></li>
<li><p>Delineates the corridor based on the pre-processed network and
initial corridor. Optionally, the corridor is split into segments based
on the network and the river space is delineated.</p></li>
</ol>
<p>The <code><a href="../reference/delineate.html">delineate()</a></code> function carries out the above steps in
one and returns a list that by default contains the following output
elements: <code>corridor</code>, <code>segments</code>, and
<code>riverspace</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bucharest_dambovita</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/delineate.html">delineate</a></span><span class="op">(</span></span>
<span>  <span class="va">city_name</span>,</span>
<span>  <span class="va">river_name</span>,</span>
<span>  segments <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  riverspace <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; The default `network_buffer` of 3000 m is used for corridor delineation.</span></span>
<span><span class="co">#&gt; The default `buildings_buffer` of 100 m is used for riverspace delineation.</span></span>
<span><span class="co">#&gt; Saving data to cache directory: /home/runner/.cache/R/rcrisp/osmdata_building__25.965_44.393_26.227_44.468.rds</span></span>
<span><span class="co">#&gt; Saving data to cache directory: /home/runner/.cache/R/rcrisp/dem_Copernicus_DSM_COG_10_N44_00_E026_00_DEM_Copernicus_DSM_COG_10_N44_00_E025_00_DEM_25.898_44.344_26.295_44.517.rds</span></span>
<span><span class="co">#&gt; Calculating viewpoints from both river edge and river centerline.</span></span>
<span></span>
<span><span class="co"># Plot all layers within the extent of the delineated corridor</span></span>
<span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">bucharest_dambovita</span><span class="op">$</span><span class="va">corridor</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bucharest_dambovita</span><span class="op">$</span><span class="va">valley</span>, col <span class="op">=</span> <span class="st">"grey"</span>, border <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>     xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="st">"xmin"</span><span class="op">]</span>, <span class="va">bbox</span><span class="op">[</span><span class="st">"xmax"</span><span class="op">]</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox</span><span class="op">[</span><span class="st">"ymin"</span><span class="op">]</span>, <span class="va">bbox</span><span class="op">[</span><span class="st">"ymax"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bucharest_dambovita</span><span class="op">$</span><span class="va">riverspace</span>, col <span class="op">=</span> <span class="st">"lightgreen"</span>, border <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>     add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bucharest_osm</span><span class="op">$</span><span class="va">river_centerline</span>, col <span class="op">=</span> <span class="st">"blue"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bucharest_dambovita</span><span class="op">$</span><span class="va">segments</span>, border <span class="op">=</span> <span class="st">"lightblue"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bucharest_dambovita</span><span class="op">$</span><span class="va">corridor</span>, border <span class="op">=</span> <span class="st">"red"</span>, wt <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="vig_05-corridor-delineation_files/figure-html/delineate-1.png" alt="Delineation of the corridor of River Dâmbovița in Bucharest" width="700"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Claudiu Forgaci, Francesco Nattino, Netherlands eScience Center.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
