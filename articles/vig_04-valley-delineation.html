<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>4. Valley delineation • rcrisp</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="4. Valley delineation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rcrisp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/vig_01-method.html">The method</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Preparation</h6></li>
    <li><a class="dropdown-item" href="../articles/vig_02-getting-osm-data.html">Getting OSM data for delineation</a></li>
    <li><a class="dropdown-item" href="../articles/vig_03-network-preparation.html">Preparing the network for delineation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Delineation</h6></li>
    <li><a class="dropdown-item" href="../articles/vig_04-valley-delineation.html">Valley delineation</a></li>
    <li><a class="dropdown-item" href="../articles/vig_05-corridor-delineation.html">Corridor delineation</a></li>
    <li><a class="dropdown-item" href="../articles/vig_06-corridor-segmentation.html">Corridor segmentation</a></li>
    <li><a class="dropdown-item" href="../articles/vig_07-riverspace-delineation.html">Riverspace delineation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CityRiverSpaces/rcrisp/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>4. Valley delineation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CityRiverSpaces/rcrisp/blob/main/vignettes/vig_04-valley-delineation.Rmd" class="external-link"><code>vignettes/vig_04-valley-delineation.Rmd</code></a></small>
      <div class="d-none name"><code>vig_04-valley-delineation.Rmd</code></div>
    </div>

    
    
<p>In a typical rcrisp workflow, valley delineation is used in the
context of corridor delineation. When the parameter
<code>method = "valley"</code> is set (this is the default value) in
<code><a href="../reference/delineate_corridor.html">delineate_corridor()</a></code>, first the river valley is extracted
from a Digital Elevation Model (DEM) with
<code><a href="../reference/delineate_valley.html">delineate_valley()</a></code> and then the resulting valley edge is
used to “guide” the delineation of the corridor on the street network,
as shown in <code>vignette("corridor-delineation")</code>.</p>
<p>In this article, we describe how <code><a href="../reference/delineate_valley.html">delineate_valley()</a></code>
works and how it can be used independently.
<code><a href="../reference/delineate_valley.html">delineate_valley()</a></code> uses a Cost Distance algorithm, variants
of which are mostly used for the delineation of wet area mapping and
valley bottom delineation in non-urban contexts <span class="citation">(Ågren et al., 2014; Murphy et al., 2009; White et al.,
2012)</span>.</p>
<p>As the resulting valley boundary is only used as an intermediate step
in <code><a href="../reference/delineate_corridor.html">delineate_corridor()</a></code>, valley delineation does not
require high-resolution DEM data, as required for non-urban applications
<span class="citation">(e.g., Lidberg et al., 2020; Nardi et al.,
2019)</span>. By default, the valley is delineated on the openly
available 30m-resolution <a href="https://dataspace.copernicus.eu/explore-data/data-collections/copernicus-contributing-missions/collections-description/COP-DEM" class="external-link">Copernicus
DEM GLO-30</a>.</p>
<p>We demonstrate valley delineation using data from rcrisp example
data, namely the DEM of Bucharest as the input raster and the river
centerline and surface as the source for which the Cost Distance is
calculated.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Attach required packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cityriverspaces.github.io/rcrisp/">rcrisp</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">bucharest_osm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_osm_example_data.html">get_osm_example_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">bucharest_dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_dem_example_data.html">get_dem_example_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data for valley delineation</span></span>
<span><span class="va">dem</span> <span class="op">&lt;-</span> <span class="va">bucharest_dem</span></span>
<span><span class="va">river_centerline</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bucharest_osm</span><span class="op">$</span><span class="va">river_centerline</span><span class="op">)</span></span>
<span><span class="va">river_surface</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bucharest_osm</span><span class="op">$</span><span class="va">river_surface</span><span class="op">)</span></span>
<span><span class="va">river</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">river_centerline</span>, <span class="va">river_surface</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="vig_04-valley-delineation_files/figure-html/unnamed-chunk-2-1.png" alt="DEM of the area enclosing River Dâmbovița in Bucharest" width="700"><p class="caption">
DEM of the area enclosing River Dâmbovița in Bucharest
</p>
</div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">valley</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/delineate_valley.html">delineate_valley</a></span><span class="op">(</span><span class="va">dem</span>, <span class="va">river</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="vig_04-valley-delineation_files/figure-html/unnamed-chunk-4-1.png" alt="Valley polygon derived from the DEM" width="700"><p class="caption">
Valley polygon derived from the DEM
</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0" line-spacing="2">
<div id="ref-agren2014" class="csl-entry">
Ågren, A. M., Lidberg, W., Strömgren, M., Ogilvie, J., &amp; Arp, P. A.
(2014). Evaluating digital terrain indices for soil wetness mapping – a
<span>Swedish</span> case study. <em>Hydrology and Earth System
Sciences</em>, <em>18</em>(9), 3623–3634. <a href="https://doi.org/10.5194/hess-18-3623-2014" class="external-link">https://doi.org/10.5194/hess-18-3623-2014</a>
</div>
<div id="ref-lidberg2020" class="csl-entry">
Lidberg, W., Nilsson, M., &amp; Ågren, A. (2020). Using machine learning
to generate high-resolution wet area maps for planning forest
management: <span>A</span> study in a boreal forest landscape.
<em>Ambio</em>, <em>49</em>(2), 475–486. <a href="https://doi.org/10.1007/s13280-019-01196-9" class="external-link">https://doi.org/10.1007/s13280-019-01196-9</a>
</div>
<div id="ref-murphy2009" class="csl-entry">
Murphy, P. N. C., Ogilvie, J., &amp; Arp, P. (2009). Topographic
modelling of soil moisture conditions: A comparison and verification of
two models. <em>European Journal of Soil Science</em>, <em>60</em>(1),
94–109. <a href="https://doi.org/10.1111/j.1365-2389.2008.01094.x" class="external-link">https://doi.org/10.1111/j.1365-2389.2008.01094.x</a>
</div>
<div id="ref-nardi2019" class="csl-entry">
Nardi, F., Annis, A., Di Baldassarre, G., Vivoni, E. R., &amp; Grimaldi,
S. (2019). <span>GFPLAIN250m</span>, a global high-resolution dataset of
<span>Earth</span>’s floodplains. <em>Scientific Data</em>,
<em>6</em>(1), 180309. <a href="https://doi.org/10.1038/sdata.2018.309" class="external-link">https://doi.org/10.1038/sdata.2018.309</a>
</div>
<div id="ref-white2012" class="csl-entry">
White, B., Ogilvie, Campbell, Hiltz, Gauthier, Chisholm, Wen, Murphy,
&amp; and Arp, P. A. A. (2012). Using the <span class="nocase">Cartographic Depth-to-Water Index</span> to <span>Locate
Small Streams</span> and <span>Associated Wet Areas</span> across
<span>Landscapes</span>. <em>Canadian Water Resources Journal / Revue
Canadienne Des Ressources Hydriques</em>, <em>37</em>(4), 333–347. <a href="https://doi.org/10.4296/cwrj2011-909" class="external-link">https://doi.org/10.4296/cwrj2011-909</a>
</div>
</div>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Claudiu Forgaci, Francesco Nattino, Netherlands eScience Center.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
